# Documentation

## 1. The Problem: What is the actual problem we are facing?

### What is the problem we want to solve with our Work?

The problem we aim to solve with our work is the manual execution of fundamental analysis. When deciding which stocks to invest in, there are numerous key performance indicators that one must know and analyze. Doing this manually and handpicking the indicators requires a lot of effort and concentration. To solve this problem, we aim to implement a solution that allows investors to obtain the most important indicators, in our case the 12 most important indicators selected by us, with just one click and display them in a table, automating the entire manual process.

### Why is this a Problem and why is it important to solve it?

This is a problem because fundamental analysis is very time consuming and labor intensive. Investors would have to collect a large amount of data and analyze it from various sources to make a good and meaningful investment.

In addition, human error can also occur very easily, as it is possible to miss an important metric or make mistakes when analyzing the data manually.

It is important for us to solve this problem because our solution can save investors time and effort by automating the analysis process and providing them with the key indicators they need to make informed decisions. This can help investors make better investment decisions, reduce the risk of errors, and ultimately lead to better investment outcome. It is important for us to solve this problem because our solution can save investors time and effort by automating the analysis process and providing them with the key indicators they need to make informed decisions. This can help investors make better investment decisions, reduce the risk of errors, and ultimately lead to better investment results

## 2. Purpose of the Project: What exactly do we plan to do to solve the problem?

We aim to provide investors with an easier way to perform fundamental analysis by creating a solution that generates a table of the 12 most important stock indicators using a stock ticker such as "IBM". Our solution will utilize the [Alpha Vantage API](https://www.alphavantage.co/) to gather the necessary data for the indicators. Additionally, we will also calculate the indicators ourselves using Alpha Vantage to provide a comparison between the API-generated indicators and our own calculations. This solution will make the process of analyzing stock data more efficient and provide investors with the information they need to make informed investment decisions.

## 3. Approach: How exactly is the goal to be achieved?

To work out the most important stock ratios we will use [a video of the Youtuber Finanzfluss](https://www.youtube.com/watch?v=qie9sxCIhHM) as a reference.

### The 12 Most important Financial Ratios (regarding to Finanzfluss)

Assumption: Compare and understand companies within their respective industries.

Profitability Ratios:

- Revenue growth (e.g. compared to previous year)
- Gross profit (EBITDA margin)
- Return on equity (ROE)

Balance Sheet Ratios:

- Equity ratio
- Gearing ratio (debt-to-equity ratio)

Valuation Ratios:

- Market capitalization
- Enterprise value (EV)
- EV/sales
- EV/EBITDA
- Price-to-earnings ratio (P/E ratio)
- Price-to-book value ratio (P/BV ratio)
- Price-to-cash flow ratio (P/CF ratio)

After that we had to choose where to get the key figures from, but since our colleague [Edgar Kinetz already compared the best APIs for financial data in his project](./Informatikprojekt_WS22-23_Kinetz/), it was immediately clear that we would use the Alpha Vantage API. This API is very comprehensive and potentially free of charge. The key figures of the companies and their shares can be found in the section "Core Stock APIs" and "Fundamental Data" and can be accessed with the provided API requests.

The Data research came to the following results, which we will present in a table for better overview.

| Stock key figure | Data given | Data for calculation | Description | Positive | What does it mean for the investor |
| --- | --- | --- | --- | --- | --- |
| Revenue Growth | [TotalRevenue](https://www.alphavantage.co/documentation/#income-statement) (new) - [TotalRevenue](https://www.alphavantage.co/documentation/#income-statement) (old) / [TotalRevenue](https://www.alphavantage.co/documentation/#income-statement) (old)  | N/A | Revenue Growth is the increase in revenue over a period of time. | > 0 | If a company is consistently growing its revenue over time, it can signal to investors that the company is successful and has a strong competitive position in its industry.Moreover, revenue growth can indicate an expanding customer base, increasing market share, or launching new products or services. |
| Gross profit | [grossProfit](https://www.alphavantage.co/documentation/#income-statement) | [totalRevenue](https://www.alphavantage.co/documentation/#income-statement) - [costOfRevenue](https://www.alphavantage.co/documentation/#income-statement) | A company's gross profit is its financial gain after deduction of manufacturing and distribution costs. | > 0 | Gross profit is important to investors because it is a key driver of a company's net income or profitability. With a high gross profit margin, a company generates more revenue from each unit of product or service sold, resulting in a higher net income and higher stock price. If a company has a low gross profit margin, it may indicate that it is not managing its costs efficiently, resulting in lower profitability and a lower stock price. |
| Return on Equity | [returnOnEquityTTM](https://www.alphavantage.co/documentation/#company-overview) | [netIncome](https://www.alphavantage.co/documentation/#income-statement) / [totalShareholdersEquity](https://www.alphavantage.co/documentation/#income-statement) | Return on equity (ROE) is a financial performance measure calculated by dividing net income by shareholders' equity. | > 1 | Investors use ROE to evaluate a company's financial performance over time and to compare it with other companies in the same field. A consistently high ROE may suggest that a company has a competitive advantage or a strong business model that allows it to generate higher profits with less shareholder equity. It could indicate that the company will generate higher returns in the future, which is a positive sign for investors. |
| Equity ratio | [totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) / [totalAssets](https://www.alphavantage.co/documentation/#balance-sheet) | [totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) / [totalLiabilities](https://www.alphavantage.co/documentation/#balance-sheet) + [totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) | The equity ratio is a way to show how much of a company's assets were financed through equity. | > 1 | Investors should pay attention to the equity ratio because it shows how much of a company's assets are financed by equity as opposed to debt. Being less dependent on borrowing money to finance its operations, a company with a high equity ratio is likely to have lower debt levels and be more financially stable. Investors may find this encouraging because it may mean that the business is less vulnerable to financial risks and may be better able to withstand economic downturns. |
| Gearing | [longTermDebtNoncurrent](https://www.alphavantage.co/documentation/#balance-sheet) / [totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) | [longTermDebtNoncurrent](https://www.alphavantage.co/documentation/#balance-sheet) / [totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) | Gearing is the ratio of a company's debt-to-equity (D/E). It shows how much of a company's operations are financed by creditors versus shareholders. In other words, it measures a company's financial leverage. | < 1 | Gearing is important to investors because it can affect a company's ability to generate profits and pay dividends. When a company is heavily geared, it may be necessary to use a sizeable portion of its profits to pay the interest on its debt, which reduces the amount of money that can be used to pay dividends or reinvest in the company. In addition, businesses that are heavily leveraged may be more vulnerable to recessions or an increase in interest rates, which can make it challenging to repay debt. |
| Market capitalization | [MarketCapitalization](https://www.alphavantage.co/documentation/#company-overview) | [4. close](https://www.alphavantage.co/documentation/#intraday) * [SharesOutstanding](https://www.alphavantage.co/documentation/#company-overview) | Market capitalization refers to the total market value of a company that is traded on the stock market. | depends | The total value of a company's equity as judged by the market is reflected in market capitalization, which is crucial to investors. In general, bigger companies are viewed as being more established, reliable, and risk-free than smaller companies with smaller market capitalizations. As a result, investors might be more inclined to invest in larger businesses because they might provide a higher level of security and long-term stability. Market capitalization can also be used to group businesses into various market segments, such as small-cap, mid-cap, and large-cap. These classifications, which are based on a company's market capitalization in relation to competing companies, can give investors a general idea of the risk and return potential associated with various investment opportunities. |
| EV | [totalAsset](https://www.alphavantage.co/documentation/#balance-sheet) | ([4. close](https://www.alphavantage.co/documentation/#intraday) * [SharesOutstanding](https://www.alphavantage.co/documentation/#company-overview)) + [currentLongTermDebt](https://www.alphavantage.co/documentation/#balance-sheet) + [shortLongTermDebtTotal](https://www.alphavantage.co/documentation/#balance-sheet) + [longTermDebtNoncurrent](https://www.alphavantage.co/documentation/#balance-sheet) - [cashAndCashEquivalentsAtCarryingValue](https://www.alphavantage.co/documentation/#balance-sheet) | Enterprise Value is the total value of a company. | > | Because it can be used as a benchmark when comparing various companies or when estimating the value of a potential acquisition or merger, EV is a crucial metric for investors. A company that has a lower EV in comparison to its competitors may be undervalued and offer a potential investment opportunity. Enterprise Value can also be used by investors to determine crucial valuation ratios like EV/EBITDA or EV/Sales, which can help to shed more light on a company's financial stability and future growth prospects. A lower EV/EBITDA or EV/Sales ratio, in general, may show that a company is undervalued or has better growth prospects than its competitors. On the other hand, a higher ratio might point to an overvalued company or one with slower growth prospects. |
| EV to Revenue | [EVToRevenue](https://www.alphavantage.co/documentation/#balance-sheet) | (([4. close](https://www.alphavantage.co/documentation/#intraday) * [SharesOutstanding](https://www.alphavantage.co/documentation/#company-overview)) + [currentLongTermDebt](https://www.alphavantage.co/documentation/#balance-sheet) + [shortLongTermDebtTotal](https://www.alphavantage.co/documentation/#balance-sheet) + [longTermDebtNoncurrent](https://www.alphavantage.co/documentation/#balance-sheet) - [cashAndCashEquivalentsAtCarryingValue](https://www.alphavantage.co/documentation/#balance-sheet)) / [totalRevenue](https://www.alphavantage.co/documentation/#income-statement) | Enterprise Value to Revenue indicates if the company is Under or overvalued. | < | Investors use the EV to revenue ratio to compare the companys valuation in relation to its competitors in the same sector. A high EV to revenue ratio suggests that the market values the company’s ravenue higher than its competitors. In contrast, a low ratio could mean that the company is overvalued in comparison to its competitors. Investors can get a sense of how much they are paying for each dollar of revenue generated by the company. |
| EV to EBITDA | [EvToEBIDTA](https://www.alphavantage.co/documentation/#balance-sheet) | (([4. close](https://www.alphavantage.co/documentation/#intraday) * [SharesOutstanding](https://www.alphavantage.co/documentation/#company-overview)) + [currentLongTermDebt](https://www.alphavantage.co/documentation/#balance-sheet) + [shortLongTermDebtTotal](https://www.alphavantage.co/documentation/#balance-sheet) + [longTermDebtNoncurrent](https://www.alphavantage.co/documentation/#balance-sheet) - [cashAndCashEquivalentsAtCarryingValue](https://www.alphavantage.co/documentation/#balance-sheet)) / ([operatingIncome](https://www.alphavantage.co/documentation/#income-statement) + [depreciationAndAmortization](https://www.alphavantage.co/documentation/#income-statement) + [interestAndDebtExpense](https://www.alphavantage.co/documentation/#income-statement)) | The Enterprise Value to EBITDA ratio compares a company's value (including debt) to its cash earnings minus non-cash expenses. | < | The EV to EBITDA is used to assess how much a company is valued in relation to its competitors in the same sector. A high EV to EBITDA ratio suggests that the market values the companys earnings higher than that of its competitors, while a low ratio could suggest that the company is undervalues in relation to its competitors. It gives investors a clearer picture of a company's profitability, as it focuses on the core earnings of the business. |
| Price/Earnings | [PERatio](https://www.alphavantage.co/documentation/#company-overview) | [4. close](https://www.alphavantage.co/documentation/#intraday) / [EPS](https://www.alphavantage.co/documentation/#company-overview) | The Price to Earnings ratio shows the investor how much he can expect to invest in a company in order to gain $1 of that comapnys earnings. | < | The Price to Earnings ratio compares a stock’s price to its earnings performance. Investors can use P/E ratios to determine wether a stock is overvalued or undervalued. An investor’s expectations for the comapny’s future growth may be lower if the P/E ratio is low, on the other hand Investors may have high expectations for the company’s potential for future growth if the P/E ratio is high. |
| Price/Book | [PriceToBookRatio](https://www.alphavantage.co/documentation/#company-overview) | [4. close](https://www.alphavantage.co/documentation/#intraday) / ([totalShareholderEquity](https://www.alphavantage.co/documentation/#balance-sheet) / [commonStockSharesOutstanding](https://www.alphavantage.co/documentation/#balance-sheet)) | The Price to book ratio compares the price of a stock to its book value. | < 1 | The P/B ratio is frequently used by investors to evaluate wether a stock is overvalued or undervalued by comparing the stock prise with the book value of a company. A high P/B ratio may indicate that investors have high expectations for the company’s future growth prospects. On the other hand, a low P/B ratio may suggest that investors have lower epxectiations for the company’s future growth. |
| Price/Cash-Flow | [marketCapitalization](https://www.alphavantage.co/documentation/#company-overview) / [operatingCashFlow](https://www.alphavantage.co/documentation/#cash-flow) | [4. close](https://www.alphavantage.co/documentation/#intraday) / ([operatingCashflow](https://www.alphavantage.co/documentation/#cash-flow) / [commonStockSharesOutstanding](https://www.alphavantage.co/documentation/#balance-sheet)) | The Price to cashflow ratio measures the value of a stocks price in relation to its operating cash flow. | < | The P/CF ratio is used by investors to determine wether a stock is overvalued or undervalued. It compare’s a companys stock price with its cashflow. It helps investors understand how much they are paying for each dollar of the company’s cash flow. As the cash flow is crucial sign of a company’s financial health and sustainability, this could be a useful indicator of company’s value. |

### Problems with the approach

One problem we encountered right at the beginning is that the free version of the API is very limited. 5 API requests per minute and 500 requests per day was clearly too little for us, because in the worst case we already have 5 API requests in one function. However, we were able to get in touch with a member of staff at Alpha Vantage and with the help of Prof. Schaible and Steve we now have access to the Academic Access version of the API with 150 API requests per minute and no daily limit.

While developing an [interface to get the latest reports](src/alphavantage.py) from the API, we came across the fact that not every company publishes the same data at the same regular intervals. That is, IBM reports depreciation quarterly, but Apple doesn't, and others don't report it at all. There are many, even more serious, of these irregularities and missing data.

When implementing the option to analyze stocks belonging to an index, we tried to use the Alpha Vantage API to collect symbols from companies in an index. It has the [Listing & Delisting Status](https://www.alphavantage.co/documentation/#listing-status), which returns a [CSV file](https://www.alphavantage.co/query?function=LISTING_STATUS&apikey=demo) with the attributes 'Exchange' and 'Type', but unfortunately it only returns stocks listed in the US. Researching further, we came across [stock-symbol](https://github.com/yongghongg/stock-symbol), an API specifically designed for this use case. Given the dependency on multiple APIs that require partially registered keys, we decided to manage this ourselves. So we [webscraped Yahoo Finance](src/components.py) for a list of the top 30 stocks in terms of an index. We later found out that not all of them have data given, but we also faced the fact that Alphavantage only accepts symbols listed on NASDAQ, so the german [DAX](https://finance.yahoo.com/quote/%5EGDAXI/components), whose symbols look like BMW.DE, doesn't meet those needs, which makes the need to analyze stocks other than those returned by [NASDAQ](https://finance.yahoo.com/quote/%5EIXIC/components) obsolete.

Thats because in the financial world the companies listed on different stock exchanges have different abbreviations or ticker symbols. A ticker symbol is usually an abbreviation used to identify a listed company. This symbol consists of a letter combination of 1-6 numbers and letters, depending on the type of stock exchange. It's unique for every company on every stock exchange. This discrepancy in ticker symbols can create challenges when collecting and analyzing stock data across different exchanges. For example, a company listed as "XYZ Corporation" on the NASDAQ exchange might have a ticker symbol of "XYZ" on NASDAQ. However, the same company could be listed as "XYZ Corp." on the New York Stock Exchange (NYSE) with a ticker symbol of "XYZC." These different variations of ticker symbols make it difficult to analyze and track data consistently.
As mentionend before, Alpha Vantage adressed this issue and is aiming to provide standardized data and simplify the process of retrieving and analyzing stock information by only using ticker symbols used on NASDAQ, which is one of the major stock exchanges in the US.

However, it is still important for users to be aware of potential variations and take the necessary steps to ensure data consistency when working with stock data from several stock exchanges.